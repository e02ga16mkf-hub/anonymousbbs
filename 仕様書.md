# 匿名掲示板サイト 機能要件仕様書

## 1. 概要

### 1.1 システム概要
- 5chライクな匿名掲示板Webサイト
- 会員登録不要で誰でも匿名で投稿・閲覧が可能
- カテゴリ別に分類された掲示板（板）でのコミュニケーション

### 1.2 対象ユーザー
- インターネット利用者全般
- 匿名でのコミュニケーションを求めるユーザー

## 2. 基本機能要件

### 2.1 掲示板（板）管理機能

#### 2.1.1 板一覧表示
- **機能**: カテゴリ別に整理された板の一覧を表示
- **要件**:
  - カテゴリごとにグループ化された表示
  - 板名、説明、現在のスレッド数、総投稿数を表示
  - 最終更新時刻の表示

#### 2.1.2 板詳細表示
- **機能**: 選択した板のスレッド一覧を表示
- **要件**:
  - スレッド一覧の表示（デフォルト50件）
  - スレッドタイトル、レス数、最終更新時刻を表示
  - ソート機能（最終更新順、作成日順、レス数順）
  - ページネーション機能

### 2.2 スレッド管理機能

#### 2.2.1 スレッド作成
- **機能**: 新しいスレッドを作成
- **要件**:
  - スレッドタイトル入力（必須、最大50文字）
  - 初回投稿内容入力（必須、最大1000文字）
  - 同一IPからの連続スレッド作成制限（5分間隔）

#### 2.2.2 スレッド表示
- **機能**: スレッド内の投稿を表示
- **要件**:
  - 投稿番号、投稿日時、投稿内容の表示
  - レス番号でのアンカー機能
  - 最新50件表示、全件表示の切り替え
  - 自動更新機能（30秒間隔）

#### 2.2.3 スレッド検索
- **機能**: スレッドタイトルでの検索
- **要件**:
  - 板内スレッド検索
  - キーワード検索（部分一致）
  - 検索結果の表示・ソート

### 2.3 投稿（レス）機能

#### 2.3.1 投稿機能
- **機能**: スレッドへの投稿
- **要件**:
  - 本文入力（必須、最大1000文字）
  - 名前欄入力（任意、最大20文字、デフォルト「名無しさん」）
  - メール欄入力（任意、sage機能対応）
  - 投稿確認画面の表示

#### 2.3.2 投稿制限機能
- **機能**: スパム・荒らし対策
- **要件**:
  - 同一IPからの連続投稿制限（30秒間隔）
  - 同一内容の重複投稿防止
  - 禁止ワードフィルタ
  - 1日あたりの投稿数上限（100件）

#### 2.3.3 投稿表示機能
- **機能**: 投稿内容の適切な表示
- **要件**:
  - 自動リンク化（URL、メールアドレス）
  - アンカー機能（>>番号）
  - 改行・空白の適切な処理
  - 文字エスケープ処理

### 2.4 管理機能

#### 2.4.1 投稿削除機能
- **機能**: 不適切な投稿の削除
- **要件**:
  - 管理者による投稿削除
  - 削除理由の記録
  - 削除ログの保持

#### 2.4.2 アクセス制限機能
- **機能**: 問題のあるIPアドレスの制限
- **要件**:
  - IPアドレスによるアクセス禁止
  - 時限的なアクセス制限
  - 規制リストの管理

#### 2.4.3 統計・ログ機能
- **機能**: サイト運営に必要な情報の収集
- **要件**:
  - アクセスログの記録
  - 投稿数統計
  - エラーログの記録

## 3. 非機能要件

### 3.1 性能要件
- **レスポンス時間**: 3秒以内
- **同時アクセス数**: 1000ユーザー対応
- **可用性**: 99.5%以上

### 3.2 セキュリティ要件
- **データ保護**: 個人情報の適切な匿名化
- **攻撃対策**: XSS、CSRF、SQLインジェクション対策
- **通信暗号化**: HTTPS通信の実装

### 3.3 ユーザビリティ要件
- **レスポンシブデザイン**: PC・スマートフォン対応
- **アクセシビリティ**: 基本的なアクセシビリティ配慮
- **ブラウザ対応**: 主要ブラウザでの動作保証

## 4. データ要件

### 4.1 保持データ
- **板情報**: 板ID、板名、説明、カテゴリ
- **スレッド情報**: スレッドID、板ID、タイトル、作成日時、最終更新日時
- **投稿情報**: 投稿ID、スレッドID、投稿番号、名前、メール、投稿日時、本文、IPアドレスハッシュ

### 4.2 データ保持期間
- **投稿データ**: 1年間保持
- **ログデータ**: 3ヶ月間保持
- **アクセス制限データ**: 制限解除まで保持

## 5. システム制約

### 5.1 技術制約
- **プログラミング言語**: 指定なし
- **データベース**: リレーショナルDB推奨
- **Webサーバー**: 指定なし

### 5.2 運用制約
- **メンテナンス**: 月1回、深夜時間帯
- **バックアップ**: 日次バックアップ実施
- **監視**: 24時間システム監視

## 6. インターフェース要件

### 6.1 ユーザーインターフェース
- **デザイン**: シンプルで軽量なデザイン
- **ナビゲーション**: 直感的な操作性
- **レスポンス**: 素早い画面遷移

### 6.2 外部インターフェース
- **検索エンジン**: robots.txtによるクローラー制御
- **API**: 必要に応じて外部連携API

## 7. 今後の拡張性

### 7.1 機能拡張
- トリップ機能（固定ハンドル）
- 画像投稿機能
- 投稿者識別機能

### 7.2 技術的拡張
- CDN導入による高速化
- 負荷分散システム
- モバイルアプリ化

---

**作成日**: 2025年8月23日  
**版数**: 1.0  
**承認者**: [承認者名]